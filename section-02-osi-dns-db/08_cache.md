# 캐싱(Caching)

캐싱은 데이터의 복사본 또는 연산 결과를 임시로 저장하여 **요청에 대한 응답을 더 빠르고 효율적으로 만드는 기술**  
자주 사용하는 데이터/결과를 미리 저장해두고, 다시 필요할 때 즉시 꺼내 쓰는 방식

---

## 1. 캐싱의 목적 및 장점

- **목적:**

  - 자주 쓰는 복잡한 연산 결과나 데이터를 미리 저장, 요청 시마다 다시 계산하지 않고 바로 응답
  - **비유:** 학교 학급 전화번호부를 미리 만들어두면, 반복 요청마다 학생에게 물어볼 필요 없이 바로 제공 가능

- **장점:**
  - 빠른 데이터 전달
  - DB/서버/네트워크 등 리소스 및 부하 감소
  - 네트워크 트래픽 및 운영 비용 절감 가능

---

## 2. 캐싱의 단점

- **일관성 유지 어려움:**
  - 원본 데이터가 변경되어도 캐시가 바로 반영하지 않으면 데이터 불일치 발생
- **아키텍처 복잡성 증가:**
  - 캐시 일관성 관리, 만료 등 추가적인 구조/로직 필요
- **비용 증가:**
  - 별도 캐시 서버/메모리 등 인프라 비용 발생 (하지만 리소스 절감 등 편익도 큼)

---

## 3. 캐싱 관련 용어

| 용어                   | 설명                                                                      |
| ---------------------- | ------------------------------------------------------------------------- |
| **원본**               | 캐싱할 데이터나 연산 결과를 제공하는 주체                                 |
| **캐시 히트**          | 요청 데이터가 캐시에 이미 저장되어 바로 응답할 수 있는 상황               |
| **캐시 미스**          | 캐시에 데이터가 없어, 원본에 직접 요청해야 하는 상황                      |
| **캐시 만료**          | 저장된 캐시 데이터를 삭제하거나 업데이트하는 것 (일관성 유지를 위해 필요) |
| **TTL (Time To Live)** | 캐시가 유효한 시간, 만료 시간 경과 시 캐시 자동 삭제/무효화               |

---

## 4. 캐싱 방식 (Cache Filling Policies)

### 4.1 레이지 로딩 (Lazy Loading)

- **요청이 들어올 때만 캐시를 채움**
- 장점: 불필요한 캐싱 없음
- 단점: 첫 요청 시 느릴 수 있음

### 4.2 이거 로딩 (Eager Loading)

- **미리 캐시 데이터를 모두 채워놓음**
- 장점: 언제든 즉시 응답
- 단점: 불필요한 데이터까지 메모리/용량 낭비, 최초 로딩 시 리소스↑

### 4.3 라이트 스루 (Write-Through)

- **데이터 변경 시, 캐시와 원본에 동시에 저장**
- 장점: 일관성↑
- 단점: 쓰기 작업 느려질 수 있음

### 4.4 라이트 백 (Write-Back)

- **캐시에 먼저 저장, 이후 원본에 업데이트**
- 장점: 쓰기 빠름
- 단점: 캐시 장애 시 데이터 유실 위험

---

## 5. 캐시 만료 정책 (Eviction Policy)

| 정책                            | 설명                                                   |
| ------------------------------- | ------------------------------------------------------ |
| **TTL (Time To Live)**          | 일정 시간이 지나면 캐시 자동 만료 (모든 데이터에 적용) |
| **LRU (Least Recently Used)**   | 가장 최근에 사용되지 않은 데이터부터 만료              |
| **LFU (Least Frequently Used)** | 사용 빈도가 가장 낮은 데이터부터 만료                  |
| **FIFO (First-In, First-Out)**  | 먼저 들어온 데이터부터 만료 (실전에서는 드물게 사용)   |

---

## 6. 캐싱 활용 사례

- **CDN(Content Delivery Network):**
  - ex. AWS CloudFront
  - 전 세계 엣지 서버에 웹 리소스 캐싱
- **인메모리 DB/Cache:**
  - ex. AWS ElasticCache, Redis, Memory DB 등
  - 랭킹, 세션, 반복 데이터 빠른 저장/조회
- **웹 브라우저 캐시:**
  - HTML/JS/CSS/이미지 등 자주 쓰는 리소스는 브라우저가 직접 캐싱
- **RAM:**
  - 컴퓨터의 연산 결과, 데이터 등을 빠르게 저장해 재사용 (휘발성 캐시)
- **DNS:**
  - 도메인 → IP 변환 결과를 일정 시간(TTL) 동안 캐싱
